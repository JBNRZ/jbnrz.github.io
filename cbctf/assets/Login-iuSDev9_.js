import{r as u,j as e,m as n,B as w,u as y,a as j,s as f,f as v,t as m}from"./index-BsY50m5N.js";import{a as N}from"./auth-51U7aFce.js";function _({onSubmit:o}){const[a,d]=u.useState({username:"",password:""}),[s,r]=u.useState({}),[p,x]=u.useState(!1),h=()=>{const t={};return a.username?a.username.length<3&&(t.username="Username must be at least 3 characters"):t.username="Username is required",a.password?a.password.length<6&&(t.password="Password must be at least 6 characters"):t.password="Password is required",r(t),Object.keys(t).length===0},g=async t=>{if(t.preventDefault(),!!h()){x(!0);try{await o({type:"login",data:{username:a.username,password:a.password}})}catch(i){r(l=>({...l,submit:i.message}))}finally{x(!1)}}},b=t=>{const{name:i,value:l}=t.target;d(c=>({...c,[i]:l})),s[i]&&r(c=>({...c,[i]:""}))};return e.jsxs(n.form,{onSubmit:g,className:"w-[400px] bg-black/40 backdrop-blur-[2px] border border-neutral-300 rounded-md p-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.2},children:[e.jsxs("div",{className:"relative flex justify-center mb-8",children:[e.jsx("div",{className:"absolute -top-[3px] -right-[3px] w-[10px] h-[10px] border-t border-r border-neutral-300"}),e.jsx("div",{className:"absolute -bottom-[3px] -left-[3px] w-[10px] h-[10px] border-b border-l border-neutral-300"}),e.jsx(n.span,{className:"text-neutral-300 text-2xl font-mono tracking-wider",initial:{opacity:0},animate:{opacity:1},transition:{duration:.15},children:"ADMIN LOGIN"})]}),e.jsxs(n.div,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"username",value:a.username,onChange:b,placeholder:"Username",className:`
                w-full h-[40px] bg-black/20 border rounded-md px-4 
                text-neutral-50 placeholder-neutral-400
                transition-all duration-200
                ${s.username?"border-red-500 focus:border-red-500 focus:shadow-[0_0_15px_rgba(239,68,68,0.3)]":"border-neutral-300 focus:border-geek-400 focus:shadow-[0_0_15px_rgba(89,126,247,0.3)]"}
            `}),s.username&&e.jsx(n.span,{className:"text-red-500 text-xs mt-1 block",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.15},children:s.username})]}),e.jsxs("div",{children:[e.jsx("input",{type:"password",name:"password",value:a.password,onChange:b,placeholder:"Password",className:`
                w-full h-[40px] bg-black/20 border rounded-md px-4 
                text-neutral-50 placeholder-neutral-400
                transition-all duration-200
                ${s.password?"border-red-500 focus:border-red-500 focus:shadow-[0_0_15px_rgba(239,68,68,0.3)]":"border-neutral-300 focus:border-geek-400 focus:shadow-[0_0_15px_rgba(89,126,247,0.3)]"}
            `}),s.password&&e.jsx(n.span,{className:"text-red-500 text-xs mt-1 block",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.15},children:s.password})]}),s.submit&&e.jsx(n.div,{className:"text-red-500 text-sm text-center",initial:{opacity:0},animate:{opacity:1},children:s.submit}),e.jsx(w,{type:"submit",variant:"primary",fullWidth:!0,className:"shadow-[0_0_20px_rgba(89,126,247,0.4)]",disabled:p,children:p?"PROCESSING...":"LOGIN"})]})]})}function S(){const o=y(),a=j(),d=async({data:s})=>{try{a(f({effect:"adminLogin",loading:!0}));const r=await N({name:s.username,password:s.password});r.code===200?(await a(v(!0)),m.success({description:"Login successful"}),o("/admin/dashboard")):m.danger({title:"Login failed",description:r.msg})}catch(r){console.error("Login failed:",r.message),m.danger({title:"Login failed",description:r.message})}finally{a(f({effect:"adminLogin",loading:!1}))}};return e.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-190px)]",children:e.jsx(_,{onSubmit:d})})}export{S as default};
