import{e as pe,r,t as i,j as e,B as g,m as y,L as ge}from"./index-DOX0JLyq.js";import{D as fe,k as be,e as je,E as Ne,F as ve,G as ke}from"./contest-DLqQonXQ.js";import{A as ye}from"./AdminPagination-Dx5PTlOo.js";import{A as U,M as T}from"./AdminModal-D52a7xns.js";import{I as we}from"./IconRefresh-BJ77D5oj.js";import{I as Ce}from"./IconServer-BIYix7MZ.js";import{c as F}from"./createReactComponent-CBkqNMlI.js";import{I as G}from"./IconUsers-42tt07pt.js";import{I as Se}from"./IconSearch-B5kyOvsb.js";import{I as _e}from"./IconTable-BovTP8ee.js";import"./IconX-C79WDLGg.js";/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var D=F("outline","ban","IconBan",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M5.7 5.7l12.6 12.6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ie=F("outline","filter","IconFilter",[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $=F("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var W=F("outline","target","IconTarget",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);function Be(){const{id:f}=pe(),[j,q]=r.useState([]),[S,J]=r.useState(0),[O,P]=r.useState(1),[K,H]=r.useState(!1),[l,V]=r.useState({user_id:"",team_id:"",challenge_id:"",limit:20,offset:0}),[c,d]=r.useState({users:[],teams:[],challenges:[]}),[E,L]=r.useState({users:!1,teams:!1,challenges:!1}),m={users:r.useRef(null),teams:r.useRef(null),challenges:r.useRef(null)},[p,_]=r.useState([]),[Q,I]=r.useState(!1),[X,z]=r.useState(!1),[b,Y]=r.useState([]),[R,Z]=r.useState([]),[x,N]=r.useState([]),[h,w]=r.useState([]),[v,ee]=r.useState(50),[A,se]=r.useState({totalContainers:0,runningContainers:0,stoppedContainers:0}),M=20;r.useEffect(()=>{C(),te(),ae()},[f]),r.useEffect(()=>{C()},[O,l.user_id,l.team_id,l.challenge_id]),r.useEffect(()=>{const s=t=>{const a=m.users.current&&!m.users.current.contains(t.target),n=m.teams.current&&!m.teams.current.contains(t.target),o=m.challenges.current&&!m.challenges.current.contains(t.target);a&&c.users.length>0&&d(u=>({...u,users:[]})),n&&c.teams.length>0&&d(u=>({...u,teams:[]})),o&&c.challenges.length>0&&d(u=>({...u,challenges:[]}))};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[c]);const C=async()=>{H(!0);try{const s={...l,limit:M,offset:(O-1)*M};Object.keys(s).forEach(a=>{s[a]===""&&delete s[a]});const t=await fe(parseInt(f),s);if(t.code===200){q(t.data.victims||[]),J(t.data.count||0);const a=t.data.victims||[],n=a.filter(o=>o.remaining>0).length;se({totalContainers:t.data.count||0,runningContainers:n,stoppedContainers:a.length-n})}else i.danger({description:t.msg||"获取容器列表失败"})}catch(s){console.error("获取容器列表失败:",s),i.danger({description:"获取容器列表失败"})}finally{H(!1)}},te=async()=>{try{const s=await be(parseInt(f),{limit:100,offset:0});s.code===200&&Y(s.data.teams||[])}catch(s){console.error("获取团队列表失败:",s)}},ae=async()=>{try{const s=await je(parseInt(f));s.code===200&&Z(s.data.challenges||[])}catch(s){console.error("获取题目列表失败:",s)}},k=(s,t)=>{V(a=>({...a,[s]:t})),P(1)},ne=async(s,t,a,n)=>{if(!t||t.trim()===""){a([]);return}n(!0);try{const o=await ke({model:s,name:t.trim(),limit:10,offset:0});if(o.code===200){let u=o.data.results||[];s==="team"&&(u=u.filter(ue=>ue.contest_id===parseInt(f))),a(u)}else i.danger({description:o.msg||"搜索失败"}),a([])}catch(o){console.error("搜索失败:",o),i.danger({description:"搜索失败"}),a([])}finally{n(!1)}},B=(()=>{let s;return(t,a,n,o)=>{clearTimeout(s),s=setTimeout(()=>{ne(t,a,n,o)},300)}})(),re=()=>{V({user_id:"",team_id:"",challenge_id:"",limit:20,offset:0}),d({users:[],teams:[],challenges:[]}),P(1)},le=s=>{P(s)},oe=s=>{_(t=>t.includes(s)?t.filter(a=>a!==s):[...t,s])},ie=()=>{p.length===j.length?_([]):_(j.map(s=>s.id))};r.useEffect(()=>{if(b.length>0){const s=v/100,t=Math.max(1,Math.floor(b.length*s)),n=[...b].sort(()=>Math.random()-.5).slice(0,t).map(o=>o.id);N(n)}},[v,b]);const ce=async()=>{if(p.length===0){i.warning({description:"请选择要停止的容器"});return}try{const s=await Ne(parseInt(f),p);s.code===200?(i.success({description:"停止容器成功"}),_([]),C()):i.danger({description:s.msg||"停止容器失败"})}catch(s){console.error("停止容器失败:",s),i.danger({description:"停止容器失败"})}z(!1)},de=async()=>{if(h.length===0||x.length===0){i.warning({description:"请选择题目和团队"});return}try{const s=await ve(parseInt(f),h,x);s.code===200?(i.success({description:"开启容器成功"}),w([]),N([]),C()):i.danger({description:s.msg||"开启容器失败"})}catch(s){console.error("开启容器失败:",s),i.danger({description:"开启容器失败"})}I(!1)},me=s=>s?new Date(s).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-",xe=s=>{if(!s||s<=0)return"已停止";const t=Math.floor(s/3600),a=Math.floor(s%3600/60),n=Math.floor(s%60);return`${t}h ${a}m ${n}s`},he=s=>!s||s<=0?"text-red-400 bg-red-400/10 border-red-400/30":"text-green-400 bg-green-400/10 border-green-400/30";return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
          .slider::-webkit-slider-thumb {
            appearance: none;
            height: 12px;
            width: 12px;
            border-radius: 50%;
            background: #597ef7;
            cursor: pointer;
            border: 2px solid #1f2937;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
          }
          
          .slider::-moz-range-thumb {
            height: 12px;
            width: 12px;
            border-radius: 50%;
            background: #597ef7;
            cursor: pointer;
            border: 2px solid #1f2937;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
          }
          
          .slider::-webkit-slider-track {
            background: transparent;
          }
          
          .slider::-moz-range-track {
            background: transparent;
          }
        `}),e.jsxs("div",{className:"w-full max-w-[1400px] mx-auto space-y-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-mono text-neutral-50 tracking-wider",children:"容器管理"}),e.jsx("p",{className:"text-neutral-400 font-mono mt-2",children:"管理比赛中的容器实例，支持批量开启和停止操作"})]}),e.jsx(g,{variant:"ghost",size:"sm",align:"icon-left",icon:e.jsx(we,{size:16}),onClick:C,className:"!text-neutral-400 hover:!text-neutral-300",children:"刷新"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(y.div,{className:"border border-neutral-300/30 rounded-md bg-black/30 backdrop-blur-[2px] p-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-400/20 rounded-md flex items-center justify-center",children:e.jsx(Ce,{size:20,className:"text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-mono text-neutral-400",children:"总容器数"}),e.jsx("p",{className:"text-2xl font-mono text-neutral-50",children:A.totalContainers})]})]})}),e.jsx(y.div,{className:"border border-neutral-300/30 rounded-md bg-black/30 backdrop-blur-[2px] p-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-400/20 rounded-md flex items-center justify-center",children:e.jsx($,{size:20,className:"text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-mono text-neutral-400",children:"运行中"}),e.jsx("p",{className:"text-2xl font-mono text-green-400",children:A.runningContainers})]})]})}),e.jsx(y.div,{className:"border border-neutral-300/30 rounded-md bg-black/30 backdrop-blur-[2px] p-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-400/20 rounded-md flex items-center justify-center",children:e.jsx(D,{size:20,className:"text-red-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-mono text-neutral-400",children:"已停止"}),e.jsx("p",{className:"text-2xl font-mono text-red-400",children:A.stoppedContainers})]})]})})]})]}),e.jsxs(y.div,{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"border border-neutral-300/30 rounded-md bg-black/30 backdrop-blur-[2px] p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx($,{size:18,className:"text-neutral-400"}),e.jsx("h3",{className:"text-base font-mono text-neutral-50",children:"快速操作"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("label",{className:"text-xs font-mono text-neutral-400 flex items-center gap-1",children:[e.jsx(W,{size:14}),"选择题目"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>w(R.filter(s=>s.type==="pods").map(s=>s.id)),className:"!text-xs !h-5 !px-1",children:"全选"}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>w([]),className:"!text-xs !h-5 !px-1",children:"清空"})]})]}),e.jsx("div",{className:"max-h-24 overflow-y-auto border border-neutral-300/30 rounded-md bg-black/10",children:R.filter(s=>s.type==="pods").map(s=>e.jsxs("div",{className:"flex items-center p-1 hover:bg-black/30 transition-colors",children:[e.jsx("input",{type:"checkbox",id:`challenge-${s.id}`,checked:h.includes(s.id),onChange:t=>{t.target.checked?w(a=>[...a,s.id]):w(a=>a.filter(n=>n!==s.id))},className:`w-3 h-3 rounded border-neutral-300/30 text-geek-400\r
                                focus:ring-geek-400 focus:ring-offset-0 bg-black/20`}),e.jsx("label",{htmlFor:`challenge-${s.id}`,className:"ml-2 text-xs font-mono text-neutral-300 cursor-pointer flex-1 truncate",children:s.name})]},s.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("label",{className:"text-xs font-mono text-neutral-400 flex items-center gap-1",children:[e.jsx(G,{size:14}),e.jsx("span",{className:"text-xs font-mono text-neutral-400",children:"随机选择队伍"}),e.jsxs("span",{className:"text-xs font-mono text-geek-400",children:[v,"%"]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>N(b.map(s=>s.id)),className:"!text-xs !h-5 !px-1",children:"全选"}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>N([]),className:"!text-xs !h-5 !px-1",children:"清空"})]})]}),e.jsx("div",{className:"mb-3 p-2 border border-neutral-300/20 rounded-md bg-black/10",children:e.jsx("div",{className:"relative",children:e.jsx("input",{type:"range",min:"0",max:"100",value:v,onChange:s=>ee(parseInt(s.target.value)),className:"w-full h-1 bg-neutral-700 rounded-lg appearance-none cursor-pointer slider",style:{background:`linear-gradient(to right, #597ef7 0%, #597ef7 ${v}%, #374151 ${v}%, #374151 100%)`}})})}),e.jsx("div",{className:"max-h-24 overflow-y-auto border border-neutral-300/30 rounded-md bg-black/10",children:b.map(s=>e.jsxs("div",{className:"flex items-center p-1 hover:bg-black/30 transition-colors",children:[e.jsx("input",{type:"checkbox",id:`team-${s.id}`,checked:x.includes(s.id),onChange:t=>{t.target.checked?N(a=>[...a,s.id]):N(a=>a.filter(n=>n!==s.id))},className:`w-3 h-3 rounded border-neutral-300/30 text-geek-400\r
                                focus:ring-geek-400 focus:ring-offset-0 bg-black/20`}),e.jsx("label",{htmlFor:`team-${s.id}`,className:"ml-2 text-xs font-mono text-neutral-300 cursor-pointer flex-1 truncate",children:s.name})]},s.id))})]})]}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsxs(g,{variant:"primary",size:"sm",align:"icon-left",icon:e.jsx($,{size:14}),onClick:()=>I(!0),disabled:h.length===0||x.length===0,className:"!text-xs !h-7 !px-3",children:["开启 (",h.length,"×",x.length,")"]})})]}),e.jsxs("div",{className:"border border-neutral-300/30 rounded-md bg-black/30 backdrop-blur-[2px] p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{size:18,className:"text-neutral-400"}),e.jsx("h3",{className:"text-base font-mono text-neutral-50",children:"过滤条件"})]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:re,className:"!text-neutral-400 hover:!text-neutral-300 !text-xs !h-6 !px-2",children:"重置"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"relative",ref:m.users,children:[e.jsx("label",{className:"block text-xs font-mono text-neutral-400 mb-1",children:"用户名称"}),e.jsxs("div",{className:"relative",children:[e.jsx(Se,{size:14,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-neutral-400"}),e.jsx("input",{type:"text",placeholder:"搜索用户...",onChange:s=>{const t=s.target.value;B("user",t,a=>d(n=>({...n,users:a})),a=>L(n=>({...n,users:a})))},className:`w-full h-8 pl-7 pr-2 bg-black/20 border border-neutral-300/30 rounded-md\r
                            text-xs text-neutral-50 placeholder-neutral-500\r
                            focus:outline-none focus:border-geek-400 focus:shadow-[0_0_15px_rgba(89,126,247,0.3)]\r
                            transition-all duration-200`}),E.users&&e.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"w-3 h-3 border border-geek-400 border-t-transparent rounded-full animate-spin"})})]}),c.users.length>0&&e.jsx("div",{className:"dropdown-custom max-h-32",children:c.users.map(s=>e.jsx("div",{className:"dropdown-option text-xs",onClick:()=>{k("user_id",s.id.toString()),d(t=>({...t,users:[]}))},children:s.name||s.username||`用户${s.id}`},s.id))})]}),e.jsxs("div",{className:"relative",ref:m.teams,children:[e.jsx("label",{className:"block text-xs font-mono text-neutral-400 mb-1",children:"团队名称"}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{size:14,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-neutral-400"}),e.jsx("input",{type:"text",placeholder:"搜索团队...",onChange:s=>{const t=s.target.value;B("team",t,a=>d(n=>({...n,teams:a})),a=>L(n=>({...n,teams:a})))},className:`w-full h-8 pl-7 pr-2 bg-black/20 border border-neutral-300/30 rounded-md\r
                            text-xs text-neutral-50 placeholder-neutral-500\r
                            focus:outline-none focus:border-geek-400 focus:shadow-[0_0_15px_rgba(89,126,247,0.3)]\r
                            transition-all duration-200`}),E.teams&&e.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"w-3 h-3 border border-geek-400 border-t-transparent rounded-full animate-spin"})})]}),c.teams.length>0&&e.jsx("div",{className:"dropdown-custom max-h-32",children:c.teams.map(s=>e.jsx("div",{className:"dropdown-option text-xs",onClick:()=>{k("team_id",s.id.toString()),d(t=>({...t,teams:[]}))},children:s.name||`团队${s.id}`},s.id))})]}),e.jsxs("div",{className:"relative",ref:m.challenges,children:[e.jsx("label",{className:"block text-xs font-mono text-neutral-400 mb-1",children:"题目名称"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{size:14,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-neutral-400"}),e.jsx("input",{type:"text",placeholder:"搜索题目...",onChange:s=>{const t=s.target.value;B("challenge",t,a=>d(n=>({...n,challenges:a})),a=>L(n=>({...n,challenges:a})))},className:`w-full h-8 pl-7 pr-2 bg-black/20 border border-neutral-300/30 rounded-md\r
                            text-xs text-neutral-50 placeholder-neutral-500\r
                            focus:outline-none focus:border-geek-400 focus:shadow-[0_0_15px_rgba(89,126,247,0.3)]\r
                            transition-all duration-200`}),E.challenges&&e.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"w-3 h-3 border border-geek-400 border-t-transparent rounded-full animate-spin"})})]}),c.challenges.length>0&&e.jsx("div",{className:"dropdown-custom max-h-32",children:c.challenges.map(s=>e.jsx("div",{className:"dropdown-option text-xs",onClick:()=>{k("challenge_id",s.id.toString()),d(t=>({...t,challenges:[]}))},children:s.name||`题目${s.id}`},s.id))})]})]}),(l.user_id||l.team_id||l.challenge_id)&&e.jsx("div",{className:"mt-3 pt-3 border-t border-neutral-300/20",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.user_id&&e.jsxs("span",{className:"px-2 py-1 bg-geek-400/20 text-geek-400 text-xs font-mono rounded border border-geek-400/30",children:["用户ID: ",l.user_id,e.jsx("button",{onClick:()=>k("user_id",""),className:"ml-1 hover:text-red-400",children:"×"})]}),l.team_id&&e.jsxs("span",{className:"px-2 py-1 bg-blue-400/20 text-blue-400 text-xs font-mono rounded border border-blue-400/30",children:["团队ID: ",l.team_id,e.jsx("button",{onClick:()=>k("team_id",""),className:"ml-1 hover:text-red-400",children:"×"})]}),l.challenge_id&&e.jsxs("span",{className:"px-2 py-1 bg-green-400/20 text-green-400 text-xs font-mono rounded border border-green-400/30",children:["题目ID: ",l.challenge_id,e.jsx("button",{onClick:()=>k("challenge_id",""),className:"ml-1 hover:text-red-400",children:"×"})]})]})})]})]}),e.jsxs(y.div,{className:"border border-neutral-300 rounded-md bg-black/30 backdrop-blur-[2px] overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"p-4 bg-black/20 border-b border-neutral-300/30 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{size:20,className:"text-neutral-400"}),e.jsx("h3",{className:"text-lg font-mono text-neutral-50",children:"容器列表"}),e.jsxs("span",{className:"text-sm font-mono text-neutral-400",children:["(共 ",S," 个容器)"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm font-mono text-neutral-400",children:["已选择: ",p.length]}),e.jsx(g,{variant:"danger",size:"sm",align:"icon-left",icon:e.jsx(D,{size:16}),onClick:()=>z(!0),disabled:p.length===0,children:"停止容器"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-black/40",children:[e.jsx("th",{className:"p-4 text-left text-neutral-400 font-mono",children:e.jsx("input",{type:"checkbox",checked:p.length===j.length&&j.length>0,onChange:ie,className:`w-4 h-4 rounded border-neutral-300/30 text-geek-400 \r
                              focus:ring-geek-400 focus:ring-offset-0 bg-black/20`})}),e.jsx("th",{className:"p-4 text-left text-neutral-400 font-mono whitespace-nowrap",children:"ID"}),e.jsx("th",{className:"p-4 text-left text-neutral-400 font-mono whitespace-nowrap",children:"题目"}),e.jsx("th",{className:"p-4 text-left text-neutral-400 font-mono whitespace-nowrap",children:"团队"}),e.jsx("th",{className:"p-4 text-left text-neutral-400 font-mono whitespace-nowrap",children:"用户"}),e.jsx("th",{className:"p-4 text-left text-neutral-400 font-mono whitespace-nowrap",children:"远程地址"}),e.jsx("th",{className:"p-4 text-left text-neutral-400 font-mono whitespace-nowrap",children:"开始时间"}),e.jsx("th",{className:"p-4 text-left text-neutral-400 font-mono whitespace-nowrap",children:"状态"})]})}),e.jsx("tbody",{children:K?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"p-8 text-center",children:e.jsx(ge,{})})}):j.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"p-8 text-center text-neutral-400",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[e.jsx("svg",{className:"w-12 h-12 text-neutral-300/30",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),e.jsx("span",{className:"font-mono",children:"暂无容器数据"})]})})}):j.map((s,t)=>e.jsxs(y.tr,{className:"border-t border-neutral-300/10 hover:bg-black/40 transition-colors",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:t*.02},whileHover:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:[e.jsx("td",{className:"p-4 text-neutral-300 font-mono",children:e.jsx("input",{type:"checkbox",checked:p.includes(s.id),onChange:()=>oe(s.id),className:`w-4 h-4 rounded border-neutral-300/30 text-geek-400 \r
                                  focus:ring-geek-400 focus:ring-offset-0 bg-black/20`})}),e.jsx("td",{className:"p-4 text-neutral-300 font-mono whitespace-nowrap",children:s.id}),e.jsx("td",{className:"p-4 text-neutral-300 font-mono whitespace-nowrap",children:s.challenge}),e.jsx("td",{className:"p-4 text-neutral-300 font-mono whitespace-nowrap",children:s.team}),e.jsx("td",{className:"p-4 text-neutral-300 font-mono whitespace-nowrap",children:s.user}),e.jsx("td",{className:"p-4 text-neutral-300 font-mono",children:s.remote&&s.remote.length>0?e.jsx("div",{className:"space-y-1",children:s.remote.map((a,n)=>e.jsx("div",{className:"text-xs bg-black/30 text-geek-400 px-2 py-1 rounded border border-geek-400/30",children:a},n))}):e.jsx("span",{className:"text-neutral-400",children:"-"})}),e.jsx("td",{className:"p-4 text-neutral-300 font-mono whitespace-nowrap",children:me(s.start)}),e.jsx("td",{className:"p-4 text-neutral-300 font-mono whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded-md text-xs font-mono border ${he(s.remaining)}`,children:xe(s.remaining)})})]},s.id))})]})}),S>0&&e.jsx("div",{className:"p-4 border-t border-neutral-300/30 bg-black/20 flex justify-center",children:e.jsx(ye,{total:Math.ceil(S/M),current:O,pageSize:M,onChange:le,showTotal:!0,totalItems:S})})]}),e.jsx(U,{isOpen:Q,onClose:()=>I(!1),title:"确认开启容器",footer:e.jsxs(e.Fragment,{children:[e.jsx(T,{onClick:()=>I(!1),children:"取消"}),e.jsx(T,{variant:"primary",onClick:de,children:"确认开启"})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($,{size:20,className:"text-geek-400"}),e.jsx("p",{className:"text-neutral-300 font-mono",children:"确定要为以下选中的组合开启容器吗？"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-mono text-neutral-400 mb-2",children:["选中的题目 (",h.length,"个):"]}),e.jsx("div",{className:"max-h-32 overflow-y-auto border border-neutral-300/30 rounded-md bg-black/10 p-2",children:h.map(s=>{const t=R.find(a=>a.id===s);return t?e.jsxs("div",{className:"text-sm font-mono text-geek-400 py-1",children:["• ",t.name]},s):null})})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-mono text-neutral-400 mb-2",children:["选中的团队 (",x.length,"个):"]}),e.jsx("div",{className:"max-h-32 overflow-y-auto border border-neutral-300/30 rounded-md bg-black/10 p-2",children:x.map(s=>{const t=b.find(a=>a.id===s);return t?e.jsxs("div",{className:"text-sm font-mono text-geek-400 py-1",children:["• ",t.name]},s):null})})]})]}),e.jsx("div",{className:"bg-neutral-800/50 border border-neutral-600/30 rounded-md p-3",children:e.jsxs("p",{className:"text-xs font-mono text-neutral-400",children:["将为 ",e.jsx("span",{className:"text-geek-400",children:h.length})," 个题目 ×"," ",e.jsx("span",{className:"text-geek-400",children:x.length})," 个团队 =",e.jsxs("span",{className:"text-green-400",children:[" ",h.length*x.length]})," ","个容器组合开启容器"]})})]})}),e.jsx(U,{isOpen:X,onClose:()=>z(!1),title:"停止容器",footer:e.jsxs(e.Fragment,{children:[e.jsx(T,{onClick:()=>z(!1),children:"取消"}),e.jsx(T,{variant:"danger",onClick:ce,children:"停止"})]}),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(D,{size:20,className:"text-red-400"}),e.jsxs("p",{className:"text-neutral-300 font-mono",children:["确定要停止选中的 ",e.jsx("span",{className:"text-red-400",children:p.length})," 个容器吗？"]})]})})]})]})}export{Be as default};
