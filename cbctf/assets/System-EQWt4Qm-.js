import{j as e,m as y,B as k,L as f,r as d,t as j}from"./index-Vk1JcykI.js";import{I as b}from"./IconServer-DFak5SsF.js";import{c as o}from"./createReactComponent-DZMLdy9T.js";import{A as M,M as g}from"./AdminModal-C6SQEGRx.js";import{a as I}from"./system-B8o1qJRh.js";import"./IconX-Q1H3aBc3.js";/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var C=o("outline","cloud-computing","IconCloudComputing",[["path",{d:"M6.657 16c-2.572 0 -4.657 -2.007 -4.657 -4.483c0 -2.475 2.085 -4.482 4.657 -4.482c.393 -1.762 1.794 -3.2 3.675 -3.773c1.88 -.572 3.956 -.193 5.444 1c1.488 1.19 2.162 3.007 1.77 4.769h.99c1.913 0 3.464 1.56 3.464 3.486c0 1.927 -1.551 3.487 -3.465 3.487h-11.878",key:"svg-0"}],["path",{d:"M12 16v5",key:"svg-1"}],["path",{d:"M16 16v4a1 1 0 0 0 1 1h4",key:"svg-2"}],["path",{d:"M8 16v4a1 1 0 0 1 -1 1h-4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var N=o("outline","database","IconDatabase",[["path",{d:"M12 6m-8 0a8 3 0 1 0 16 0a8 3 0 1 0 -16 0",key:"svg-0"}],["path",{d:"M4 6v6a8 3 0 0 0 16 0v-6",key:"svg-1"}],["path",{d:"M4 12v6a8 3 0 0 0 16 0v-6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var S=o("outline","file-description","IconFileDescription",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 17h6",key:"svg-2"}],["path",{d:"M9 13h6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var w=o("outline","folder","IconFolder",[["path",{d:"M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var F=o("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);function E({config:a,loading:u=!1,onEdit:x}){const r=({title:s,icon:l,children:n})=>e.jsxs(y.div,{className:"border border-neutral-300/30 rounded-md bg-black/30 backdrop-blur-[2px] overflow-hidden",whileHover:{y:-2,borderColor:"rgba(89, 126, 247, 0.3)"},transition:{duration:.2},children:[e.jsx("div",{className:"p-6 border-b border-neutral-300/30",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l,{size:20,className:"text-geek-400"}),e.jsx("h2",{className:"text-lg font-mono text-neutral-50",children:s})]})}),e.jsx("div",{className:"p-6 space-y-4",children:n})]}),t=({label:s,value:l})=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-mono text-neutral-400",children:s}),e.jsx("span",{className:"text-sm font-mono text-neutral-300",children:l})]}),i=({label:s,items:l})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm font-mono text-neutral-400",children:s}),e.jsx("div",{className:"space-y-1",children:l.map((n,m)=>e.jsx("div",{className:"text-xs font-mono text-neutral-500 bg-neutral-800/50 px-2 py-1 rounded",children:typeof n=="string"?n:c(n)},m))})]}),c=s=>typeof s=="string"?s:typeof s=="number"?s.toString():typeof s=="boolean"?s?"是":"否":Array.isArray(s)?s.map((l,n)=>e.jsx("div",{className:"text-xs font-mono text-neutral-500 bg-neutral-800/50 px-2 py-1 rounded ml-2",children:c(l)},n)):typeof s=="object"&&s!==null?Object.entries(s).map(([l,n])=>e.jsxs("div",{className:"text-xs font-mono text-neutral-500 bg-neutral-800/50 px-2 py-1 rounded ml-2",children:[e.jsxs("span",{className:"text-neutral-400",children:[l,":"]})," ",c(n)]},l)):String(s),p=({sender:s})=>e.jsxs("div",{className:"text-xs font-mono text-neutral-500 bg-neutral-800/50 px-2 py-1 rounded",children:[e.jsxs("div",{children:["地址: ",s.addr]}),e.jsxs("div",{children:["主机: ",s.host]}),e.jsxs("div",{children:["端口: ",s.port]})]}),h=({network:s})=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-xs font-mono text-neutral-500 bg-neutral-800/50 px-2 py-1 rounded",children:[e.jsx("span",{className:"text-neutral-400",children:"CIDR:"})," ",s.cidr]}),e.jsxs("div",{className:"text-xs font-mono text-neutral-500 bg-neutral-800/50 px-2 py-1 rounded",children:[e.jsx("span",{className:"text-neutral-400",children:"网关:"})," ",s.gateway]}),e.jsxs("div",{className:"text-xs font-mono text-neutral-500 bg-neutral-800/50 px-2 py-1 rounded",children:[e.jsx("span",{className:"text-neutral-400",children:"接口:"})," ",s.interface]}),e.jsxs("div",{className:"text-xs font-mono text-neutral-500 bg-neutral-800/50 px-2 py-1 rounded",children:[e.jsx("span",{className:"text-neutral-400",children:"排除IP:"})," ",s.exclude_ips.join(", ")]})]}),v=({frpc:s})=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-xs font-mono text-neutral-500 bg-neutral-800/50 px-2 py-1 rounded",children:[e.jsx("span",{className:"text-neutral-400",children:"镜像:"})," ",s.image]}),e.jsxs("div",{className:"text-xs font-mono text-neutral-500 bg-neutral-800/50 px-2 py-1 rounded",children:[e.jsx("span",{className:"text-neutral-400",children:"启用:"})," ",s.on?"是":"否"]}),s.frps&&s.frps.map((l,n)=>e.jsxs("div",{className:"text-xs font-mono text-neutral-500 bg-neutral-800/50 px-2 py-1 rounded ml-2",children:[e.jsxs("div",{children:["主机: ",l.host]}),e.jsxs("div",{children:["端口: ",l.port]}),e.jsxs("div",{children:["令牌: ",l.token]}),l.allowed_ports&&e.jsxs("div",{children:["允许端口: ",l.allowed_ports.map(m=>`${m.from}-${m.to}`).join(", ")]})]},n))]});return e.jsx("div",{className:"w-full max-w-[1200px] mx-auto",children:e.jsxs(y.div,{className:"border border-neutral-300 rounded-md bg-black/30 backdrop-blur-[2px] p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-mono text-neutral-50",children:"系统设置"}),e.jsx(k,{variant:"primary",size:"sm",onClick:x,children:"编辑配置"})]}),u?e.jsx(f,{}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(r,{title:"基础配置",icon:b,children:[e.jsx(t,{label:"后端地址",value:a.backend}),e.jsx(t,{label:"前端域名",value:a.frontend}),e.jsx(t,{label:"数据路径",value:a.path})]}),e.jsxs(r,{title:"Gin配置",icon:b,children:[e.jsx(t,{label:"主机地址",value:a.gin.host}),e.jsx(t,{label:"运行模式",value:a.gin.mode}),e.jsx(t,{label:"端口",value:a.gin.port}),e.jsx(t,{label:"最大上传大小",value:`${a.gin.upload.max}MB`}),e.jsx(i,{label:"代理列表",items:a.gin.proxies}),e.jsx(i,{label:"日志白名单",items:a.gin.log.whitelist}),e.jsx(i,{label:"限流白名单",items:a.gin.rate.whitelist})]}),e.jsxs(r,{title:"数据库配置",icon:N,children:[e.jsx(t,{label:"数据库地址",value:a.gorm.mysql.host}),e.jsx(t,{label:"数据库端口",value:a.gorm.mysql.port}),e.jsx(t,{label:"数据库名称",value:a.gorm.mysql.db}),e.jsx(t,{label:"用户名",value:a.gorm.mysql.user}),e.jsx(t,{label:"最大空闲连接",value:a.gorm.mysql.mxidle}),e.jsx(t,{label:"最大打开连接",value:a.gorm.mysql.mxopen}),e.jsx(t,{label:"日志级别",value:a.gorm.log.level})]}),e.jsxs(r,{title:"Redis配置",icon:N,children:[e.jsx(t,{label:"Host",value:a.redis.host}),e.jsx(t,{label:"Port",value:a.redis.port})]}),e.jsxs(r,{title:"Kubernetes配置",icon:C,children:[e.jsx(t,{label:"配置文件",value:a.k8s.config}),e.jsx(t,{label:"命名空间",value:a.k8s.namespace}),e.jsx(i,{label:"节点列表",items:a.k8s.nodes}),e.jsx(t,{label:"TCPdump镜像",value:a.k8s.tcpdump}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm font-mono text-neutral-400",children:"外部网络配置"}),e.jsx(h,{network:a.k8s.external_network})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm font-mono text-neutral-400",children:"Frpc配置"}),e.jsx(v,{frpc:a.k8s.frpc})]})]}),e.jsxs(r,{title:"日志配置",icon:S,children:[e.jsx(t,{label:"日志级别",value:a.log.level}),e.jsx(t,{label:"保存日志",value:a.log.save?"是":"否"})]}),e.jsx(r,{title:"邮件配置",icon:F,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm font-mono text-neutral-400",children:"发件人列表"}),e.jsx("div",{className:"space-y-1",children:a.email.senders.map((s,l)=>e.jsx(p,{sender:s},l))})]})}),e.jsxs(r,{title:"NFS配置",icon:w,children:[e.jsx(t,{label:"服务器地址",value:a.nfs.server}),e.jsx(t,{label:"存储路径",value:a.nfs.path}),e.jsx(t,{label:"存储大小",value:a.nfs.storage})]})]})]})})}function R(){const[a,u]=d.useState(null),[x,r]=d.useState(!0),[t,i]=d.useState(!1),[c,p]=d.useState(null);d.useEffect(()=>{h()},[]);const h=async()=>{try{const l=await I();l.code===200?u(l.data):j.danger({description:l.msg||"获取系统配置失败"})}catch(l){j.danger({description:"获取系统配置失败"}),console.error(l)}finally{r(!1)}},v=()=>{p({...a}),i(!0)},s=async()=>{j.info({description:"配置更新功能待实现"}),i(!1)};return x?e.jsx(f,{}):a?e.jsxs(e.Fragment,{children:[e.jsx(E,{config:a,loading:x,onEdit:v}),e.jsx(M,{isOpen:t,onClose:()=>i(!1),title:"编辑系统配置",size:"lg",footer:e.jsxs(e.Fragment,{children:[e.jsx(g,{variant:"default",onClick:()=>i(!1),children:"取消"}),e.jsx(g,{variant:"primary",onClick:s,children:"确认"})]}),children:e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-neutral-50",children:"配置编辑功能待实现"}),e.jsx("p",{className:"text-neutral-400 text-sm mt-2",children:"请等待后续更新"})]})})]}):e.jsx("div",{className:"p-4 text-red-500",children:"No configuration data available"})}export{R as default};
