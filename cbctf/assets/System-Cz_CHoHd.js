import{j as e,m as u,B as f,L as j,r as n,t as m}from"./index-CDsAQtye.js";import{I as v}from"./IconServer-Cz-nu0dB.js";import{c as x}from"./createReactComponent-Dfj2g3Yj.js";import{A as k,M as p}from"./AdminModal-DZPUBxRT.js";import{a as N}from"./system-BOdk2Qnn.js";import"./IconX-BGEv_3sg.js";/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var M=x("outline","cloud-computing","IconCloudComputing",[["path",{d:"M6.657 16c-2.572 0 -4.657 -2.007 -4.657 -4.483c0 -2.475 2.085 -4.482 4.657 -4.482c.393 -1.762 1.794 -3.2 3.675 -3.773c1.88 -.572 3.956 -.193 5.444 1c1.488 1.19 2.162 3.007 1.77 4.769h.99c1.913 0 3.464 1.56 3.464 3.486c0 1.927 -1.551 3.487 -3.465 3.487h-11.878",key:"svg-0"}],["path",{d:"M12 16v5",key:"svg-1"}],["path",{d:"M16 16v4a1 1 0 0 0 1 1h4",key:"svg-2"}],["path",{d:"M8 16v4a1 1 0 0 1 -1 1h-4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var h=x("outline","database","IconDatabase",[["path",{d:"M12 6m-8 0a8 3 0 1 0 16 0a8 3 0 1 0 -16 0",key:"svg-0"}],["path",{d:"M4 6v6a8 3 0 0 0 16 0v-6",key:"svg-1"}],["path",{d:"M4 12v6a8 3 0 0 0 16 0v-6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var C=x("outline","file-description","IconFileDescription",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 17h6",key:"svg-2"}],["path",{d:"M9 13h6",key:"svg-3"}]]);function I({config:s,loading:d=!1,onEdit:i}){const t=({title:l,icon:o,children:c})=>e.jsxs(u.div,{className:"border border-neutral-300/30 rounded-md bg-black/30 backdrop-blur-[2px] overflow-hidden",whileHover:{y:-2,borderColor:"rgba(89, 126, 247, 0.3)"},transition:{duration:.2},children:[e.jsx("div",{className:"p-6 border-b border-neutral-300/30",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{size:20,className:"text-geek-400"}),e.jsx("h2",{className:"text-lg font-mono text-neutral-50",children:l})]})}),e.jsx("div",{className:"p-6 space-y-4",children:c})]}),a=({label:l,value:o})=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-mono text-neutral-400",children:l}),e.jsx("span",{className:"text-sm font-mono text-neutral-300",children:o})]});return e.jsx("div",{className:"w-full max-w-[1200px] mx-auto",children:e.jsxs(u.div,{className:"border border-neutral-300 rounded-md bg-black/30 backdrop-blur-[2px] p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-mono text-neutral-50",children:"系统设置"}),e.jsx(f,{variant:"primary",size:"sm",onClick:i,children:"编辑配置"})]}),d?e.jsx(j,{}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(t,{title:"基础配置",icon:v,children:[e.jsx(a,{label:"后端地址",value:s.backend}),e.jsx(a,{label:"前端域名",value:s.frontend}),e.jsx(a,{label:"数据路径",value:s.path})]}),e.jsxs(t,{title:"Gin配置",icon:v,children:[e.jsx(a,{label:"主机地址",value:s.gin.host}),e.jsx(a,{label:"运行模式",value:s.gin.mode}),e.jsx(a,{label:"端口",value:s.gin.port}),e.jsx(a,{label:"最大上传大小",value:`${s.gin.upload.max}MB`})]}),e.jsxs(t,{title:"数据库配置",icon:h,children:[e.jsx(a,{label:"数据库地址",value:s.gorm.mysql.host}),e.jsx(a,{label:"数据库端口",value:s.gorm.mysql.port}),e.jsx(a,{label:"数据库名称",value:s.gorm.mysql.db}),e.jsx(a,{label:"用户名",value:s.gorm.mysql.user}),e.jsx(a,{label:"日志级别",value:s.gorm.log.level})]}),e.jsxs(t,{title:"Redis配置",icon:h,children:[e.jsx(a,{label:"Host",value:s.redis.host}),e.jsx(a,{label:"Port",value:s.redis.port}),e.jsx(a,{label:"超时时间",value:`${s.redis.timeout}ms`})]}),e.jsxs(t,{title:"Kubernetes配置",icon:M,children:[e.jsx(a,{label:"Master地址",value:s.k8s.master}),e.jsx(a,{label:"命名空间",value:s.k8s.namespace}),e.jsx(a,{label:"配置文件",value:s.k8s.config.user||s.k8s.config.admin})]}),e.jsxs(t,{title:"日志配置",icon:C,children:[e.jsx(a,{label:"日志级别",value:s.log.level}),e.jsx(a,{label:"保存日志",value:s.log.save?"是":"否"})]})]})]})})}function B(){const[s,d]=n.useState(null),[i,t]=n.useState(!0),[a,l]=n.useState(!1),[o,c]=n.useState(null);n.useEffect(()=>{b()},[]);const b=async()=>{try{const r=await N();r.code===200?d(r.data):m.danger({description:r.msg||"获取系统配置失败"})}catch(r){m.danger({description:"获取系统配置失败"}),console.error(r)}finally{t(!1)}},g=()=>{c({...s}),l(!0)},y=async()=>{m.info({description:"配置更新功能待实现"}),l(!1)};return i?e.jsx(j,{}):s?e.jsxs(e.Fragment,{children:[e.jsx(I,{config:s,loading:i,onEdit:g}),e.jsx(k,{isOpen:a,onClose:()=>l(!1),title:"编辑系统配置",size:"lg",footer:e.jsxs(e.Fragment,{children:[e.jsx(p,{variant:"default",onClick:()=>l(!1),children:"取消"}),e.jsx(p,{variant:"primary",onClick:y,children:"确认"})]}),children:e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-neutral-50",children:"配置编辑功能待实现"}),e.jsx("p",{className:"text-neutral-400 text-sm mt-2",children:"请等待后续更新"})]})})]}):e.jsx("div",{className:"p-4 text-red-500",children:"No configuration data available"})}export{B as default};
