import{r as l,j as e,m as d,e as c,L as m}from"./index-D74-Vvq7.js";import{b as x}from"./contest-CNViduL3.js";const u={important:"border-red-400 bg-red-400/5",update:"border-yellow-400 bg-yellow-400/5",normal:"border-neutral-300 bg-black/30"},p={important:"⚠️",update:"📝",normal:"📢"};function h({notices:s}){const[r,i]=l.useState(null);return e.jsx("div",{className:"w-full max-w-[1200px] mx-auto",children:e.jsxs(d.div,{className:"border border-neutral-300 rounded-md bg-black/30 backdrop-blur-[2px] p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-mono text-neutral-50",children:"Notices"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-red-400"}),e.jsx("span",{className:"text-neutral-400 text-sm",children:"Important"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-400"}),e.jsx("span",{className:"text-neutral-400 text-sm",children:"Update"})]})]})]}),e.jsx("div",{className:"space-y-4",children:s.map(a=>e.jsx(d.div,{className:`border rounded-md overflow-hidden transition-colors duration-200
                                ${u[a.type]}
                                hover:border-neutral-100`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.2},onClick:()=>i(r===a.id?null:a.id),children:e.jsxs("div",{className:"p-4 cursor-pointer transition-colors duration-200 hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl select-none",children:p[a.type]}),e.jsx("h3",{className:"font-mono text-neutral-50 transition-colors duration-200",children:a.title})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[a.author&&e.jsxs("div",{className:"flex items-center gap-2",children:[a.author.avatar&&e.jsx("div",{className:"w-6 h-6 rounded-full bg-neutral-700 bg-cover bg-center",style:{backgroundImage:`url(${a.author.avatar})`}}),e.jsx("span",{className:"text-neutral-400 text-sm",children:a.author.name})]}),e.jsx("span",{className:"text-neutral-400 text-sm font-mono",children:a.timestamp})]})]}),e.jsx(d.div,{initial:!1,animate:{height:r===a.id?"auto":0,opacity:r===a.id?1:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsx("div",{className:"py-2 text-neutral-300 whitespace-pre-wrap",children:a.content})})]})},a.id))})]})})}const f=s=>new Date(s).toLocaleString();function b(){const{contestId:s}=c(),[r,i]=l.useState([]),[a,o]=l.useState(!0);return l.useEffect(()=>{o(!0),x(s).then(n=>{console.log(n.data.notices),i(n.data.notices.map(t=>({id:t.id,title:t.title,content:t.content,type:t.type||"normal",timestamp:f(t.created_at),author:{name:t.author.name,avatar:t.author.avatar}}))),o(!1)}).catch(n=>{console.error("Failed to fetch notices:",n),o(!1)})},[s]),a?e.jsx(m,{}):e.jsx(h,{notices:r})}export{b as default};
